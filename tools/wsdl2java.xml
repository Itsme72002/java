<!-- Use this Ant build file to generate Java classes, based on the Adyen WSDLs. The classes are generated by the wsdl2java tool, part of the Apache CXF framework. -->
<project name="Adyen WSDL2Java" default="all" basedir="..">

	<property name="cxf.home" location="C:/Program Files/apache-cxf-3.0.0" />

	<property name="build.dir" value="${basedir}/build" />
	<property name="build.wsdl2java" value="${build.dir}/wsdl2java" />
	<property name="build.java" value="${build.dir}/classes" />
	<property name="build.jar" value="${build.dir}/adyen-wsdl-cxf.jar" />
	
	<property name="dir.lib" value="${basedir}/WebContent/WEB-INF/lib" />
	<property name="dir.tools" value="${basedir}/tools/wsdl2java" />

	<property name="wsdl.url-payment" value="https://pal-test.adyen.com/pal/Payment.wsdl" />
	<property name="wsdl.url-recurring" value="https://pal-test.adyen.com/pal/Recurring.wsdl" />
	<property name="wsdl.url-notification" value="https://ca-test.adyen.com/ca/services/Notification?wsdl" />
	<property name="wsdl.url-openinvoice" value="https://ca-test.adyen.com/ca/services/OpenInvoiceDetail?wsdl" />
	<property name="wsdl.url-payout" value="https://pal-test.adyen.com/pal/servlet/soap/Payout?wsdl" />

	<property name="wsdl.bindings" value="${dir.tools}/wsdl-bindings.xml" />
	<property name="wsdl.bindings-payment" value="${dir.tools}/wsdl-bindings-payment.xml" />
	<property name="wsdl.bindings-recurring" value="${dir.tools}/wsdl-bindings-recurring.xml" />
	<property name="wsdl.bindings-notification" value="${dir.tools}/wsdl-bindings-notification.xml" />
	<property name="wsdl.bindings-openinvoice" value="${dir.tools}/wsdl-bindings-openinvoice.xml" />
	<property name="wsdl.bindings-payout" value="${dir.tools}/wsdl-bindings-payout.xml" />

	<path id="cxf.classpath">
		<fileset dir="${cxf.home}/lib">
			<include name="*.jar" />
		</fileset>
	</path>

	<target name="wsdl2java" description="Generate Java files based on specified WSDLs">
		<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
			<arg value="-verbose" />
			<arg value="-client" />
			<arg value="-autoNameResolution" />
			<arg value="-mark-generated" />
			<arg value="-d" />
			<arg value="${build.wsdl2java}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings-payment}" />
			<arg value="${wsdl.url-payment}" />
			<classpath>
				<path refid="cxf.classpath" />
			</classpath>
		</java>

		<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
			<arg value="-verbose" />
			<arg value="-client" />
			<arg value="-autoNameResolution" />
			<arg value="-mark-generated" />
			<arg value="-d" />
			<arg value="${build.wsdl2java}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings-recurring}" />
			<arg value="${wsdl.url-recurring}" />
			<classpath>
				<path refid="cxf.classpath" />
			</classpath>
		</java>

		<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
			<arg value="-verbose" />
			<arg value="-server" />
			<arg value="-impl" />
			<arg value="-autoNameResolution" />
			<arg value="-mark-generated" />
			<arg value="-d" />
			<arg value="${build.wsdl2java}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings-notification}" />
			<arg value="${wsdl.url-notification}" />
			<classpath>
				<path refid="cxf.classpath" />
			</classpath>
		</java>

		<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
			<arg value="-verbose" />
			<arg value="-server" />
			<arg value="-impl" />
			<arg value="-autoNameResolution" />
			<arg value="-mark-generated" />
			<arg value="-d" />
			<arg value="${build.wsdl2java}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings-openinvoice}" />
			<arg value="${wsdl.url-openinvoice}" />
			<classpath>
				<path refid="cxf.classpath" />
			</classpath>
		</java>

		<java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
			<arg value="-verbose" />
			<arg value="-client" />
			<arg value="-autoNameResolution" />
			<arg value="-mark-generated" />
			<arg value="-d" />
			<arg value="${build.wsdl2java}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings}" />
			<arg value="-b" />
			<arg value="${wsdl.bindings-payout}" />
			<arg value="${wsdl.url-payout}" />
			<classpath>
				<path refid="cxf.classpath" />
			</classpath>
		</java>
	</target>

	<target name="compile" depends="wsdl2java" description="Compile generated Java files">
		<mkdir dir="${build.java}" />
		<javac srcdir="${build.wsdl2java}" destdir="${build.java}" />
	</target>

	<target name="jar" depends="compile" description="Generate JAR containing all Java classes">
		<jar destfile="${build.jar}" basedir="${build.java}" />
	</target>

	<target name="all" depends="jar" description="Move generated JAR by wsdl2java to 'lib' folder">
		<move file="${build.jar}" todir="${dir.lib}" />
	</target>

	<target name="clean" description="Clean build directory">
		<delete dir="${build.dir}" />
	</target>

</project>